"use strict";( function(global) {

    //base64エンコードされた画像データ
    //http://blog.thingslabo.com/archives/000058.htmlでとりあえず変換
    //サーバとのHTTPリクエスト数を減らすため。いちいちonLoadなどを考える手間を減らすため
    var floorImage = new Image();
    var floorImageString = 'data:image/jpeg;base64,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';

    var playerBackImage = new Image();
    var playerBackImageString = 'data:image/gif;base64,R0lGODdhHgAeAMYAAAAABVpYWWNjY2JiYkxKSxISEh4eHl1dW0NFRF1dXVtdXGBgXlBQUGBeX1pcW0hISBsbGUFBQUtLSxsbG1dXV19fX2g6CRwcHCcnKUlHSLKHULOKUrWHU0BAQCMjI5lsNWo4B5lrN1xcXF9dYLOJT0xMTCIiIhwaHbWIUWBgYIFSGn9SG1xaWyUlJSwsLLOIU0dFSBsbHWg4B4JQG0dHR1haWUJCQoBRG1RUVDExMWs5CCsrKx8fH1paXM6qcMypcc6rc2FfYNvEm9/DnM2qct7Cm93EnCQkJNzDmycpKFBQUs2qcNvCmtzCnTQ0NM6pcj8/Pz4+PGdnZysrLS8vL2RkZFNTUzk5OzAwMFpaWIBRHURERGRmZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAHgAeAAAH/oABAQIDBAUGAQOCAwcIBgUBCQkKCQsJDAYNDQeKkw4PEBESE5EJFBUBFhYBDZKUCQEXGAeSCQMJGRMaGxwdHg62DR8gFh8HkQEUAbwbFw+1oxMcGxoaBhjLGyHEIbsJIiMbGyQbJReTJRgmCeK71dMcwxYh1CTwGhwkARAJFQYnsBJU24UChQYSHyyA6MZBg0FqHERQmBBBwQRTkVKQO0hNgwpiKwbuIneRxYQWLiKUGHAr0gt7DTeoUKhimkGDMDglgBADwoAKFRKwEMEuHy8NK2RYmPFO3IYBIy5BoCHAASUFIoi+6HhQhQwZNam92LUgxYAaEGywhBVARLIA/tXEcZgp40a7g7US4JiQQ4KySIwi5cOnYYYFHTfi8goIa8IEAzsEVUihIAAJewNvqAqJj9qGFK4CROABocfkHj0g7qJ2g1jNrdW2Ri1lwISDAClG+NhNYldDzSDsrtbg4weQRQEwTPAQwEEQIUKG7O78EfFYDUSIFBFiZJICChRgTDjSHAmSIkOQ+KimeSkHDkTSD+EOQ1JLCUkCKDBiBHqRH+LcIIMONRFnHnRCxFCKA7cpUZoQ5hmxREfthSTOC0Qw0USCTowwAAUIwGCDBzHs9gNhvWkGFmHV+PCED1DEEAUFUkwBARUQYLCbXPhwcIMOBMZEGBE+VGFFDFd8w0gBAxREAcRdEAlogQrtbDWNDxK00BMEgjQHV1P1rGCBDCHlg8I0u2ARQwQ2VARaFsugeZRHX6kQlzu79JQIVFYJMg6LcqkwQ0PTMNNbFCwIkoBVRSlmEAdbqaAFntXY41kt2SgWV29jhUCPb3LyUmgPglS2hWO8WKrBD7v5ME5v5EAwAQILsOBdZQ7AYEIEDiwQQA8O+BBddD+YgIENMCAQQQwwdGILLCJEgQ2cAdRwGwXQTRCDAc0uwAUFSWyBiiSBAAA7';

    var playerFrontImage = new Image();
    var playerFrontImageString = 'data:image/gif;base64,R0lGODdhHgAeAMYAAAAABVpYWWRkZGFhYUhISBISEh4eHmRiY1tbW1xeW0RERB8fHxETEFpaXF1dXV9fYVNTU1xcWmFfYFtdXEFBQWg6CFxcXBsbGycnKbKHULOIUUBAQCMjI5lsNWk6BrSJUvvgy0xMTCIiIhwaHVdXV2s5CLSHULOJTwAAACUlJSwsLLOIUxoaGFBQUEVFRWRkZrSHTmBgYGBeX7SJVDAwMBwcGs2qctvEmzQcBNzDm9zCnd3EnMurckVFRxweHezdyO3cyENDQ2FhY0tLSycnJ/rhy/zhzDQ0ND09PWdnZysrKy8vL+ndx/vgzX9QGjk5OWNhYlVVVU9PT+vcx+reyINRHERCQ4FSGj8/P39SGQAAAs2qcCgqKSgoKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAHgAeAAAH/oABAQIDBAUGAQcBCAMJCgsMDQ4OAQ8DAxAGERIOAwgOEwgEBhSjAZMBAwEVFRMJkxYWCQEXGJOTlwQXGRoaGxwICQkSHRUeHZSUgr0aFwS3uhcfILzMGhkdHhUd1swgHyEGlCEYIg4fGiDXGh+8xdvs1uoatJMGIw4kDuvVzCUVGkxYQ2ci3wUKDi7km6ThBDsQKJhlyOAQIrMPChOmUEEhxCVKGlZoQBGxV4YPDkk2RNcpIQsDAx68ChCh1weV1kSqRKfhgYMWF1y8uDUpFIxuJiZ2O/EhhlMSFxRckjHhVAAS7HjOENgtXoQIBmkQICGoU1V2JzOYYMWq6ydK/gZqLFCxyMGDCAFsMEuaoa01GDZiTEIQgIKBCwESxKh644beXjhm4MChgXIvGzl0dNLnwICIABN87siRY8fjDJFNWDbBQ0fmHQgYTcDAAlgACaRzk/6wImkv3blBOYBAoocPDosa57jxo7nzH0CAOM+tI8gkIZSGEIl9I4d059+/P/9BGvGt2C1YNNjdq3mRIkZAFIn+w2RmH0ccxCChwEUQDhfYYEM/7sFnRBH1mWQDDxSwgAQJSShxwRI+YCAgEzz90EQRIIBghBEYsgOEDU68AMEFT0BBQhRSkICEgDk8x2GHHk5BBRBT5GBDFQSkcBhioAkCWIzNAdEEjR3esBidjibQQIoVSCAQwywBfPDBctABER+SQDCBo45XXHABAi8MMIEky2hgww5T0PdejUDcmAMPGVSBRQMNIGDBBAwxwwNpz3U4RZtL2nCFEyZ8AEsAXWlAmg7dQQddabk5oY1NH1ggSCgKiHlCBpiNllt3V2RxhTFaBCXDLaHEpgAHG0wgAQlaaLHFFbhWcYUItfYalCq4zOIAElwsEkADAfSqxRU+sKBsrV244IAFkwQCADs=';

    var playerRightImage = new Image();
    var playerRightImageString = 'data:image/gif;base64,R0lGODdhHgAeAMYAAAjwglhYWFtbW2JiYmFhYUtLSxISEh0dHVpaWllZWV5eXkRERB4eHlxcXGBgYFJSUhwcHF1dXUhISBsbG0JCQklJSbOIUVdXV19fXygoKCoqKj8/P2ZmZkBAQCMjIyYmJjQcBE9PT0xMTCcnJyIiIlVVVVNTUyAgIDo6OsnJyQAAABoaGhgYGFZWVmo5CCQkJCwsLENDQ5hsNEZGRmRkZDExMVRUVNzDnB8fHyEhITw8PEVFRUFBQSkpKVBQUDQ0NGdnZysrKy8vLzk5OUpKSiUlJTAwMD09PWVlZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAHgAeAAAH/oABAgMEBQYHCAMJAgQKCwwGCA0KAgoODg8QEQoRBAgRDQISExQVEAgWFhcYCBkUCBigDZMJExoRmw0YGKMbAxwdHqmpAh8gx58IAQgXE84Smw4Fzp2xB8MWINggoBgEAhMRIZoCIiMkESURAiYRJ9jwCAnetevhCgfhAZYNEQgo8FKowJYggIkVEZpRaMAiQot+ChKsi6BtmIqBw1y4oNZgwgsYMUI4aJQMwzEZFjFmnBFhQARnExpxEjBJwUl427K5xPBgwgwas2SFOuYCJc5h3DCMbDEhBiEMAiQhOAZChlGcF17mUlBiQg0JNhB8IkC16NFUG2yEoxkhAYQJ/gxgiLVJtOiNG0cjwAjnYGaCDjgmwKIKoqiMu3ex4XKHSwGGALgg5BBL2Criy3cJLNa0DoFmDSs8TCV6GPNlAt4i6IBwq5+NEjsmeChbGrOFzARy2+ABYQEukuZomx52I3duBQh6TJjXWYCPCaRt4zzeAAGEHw0cXFiwI8bswkaHY9MsdsOEDQGABJkgBDp44qaNf7swgEbPIQQulPBxgTTO08YJMAgRRcAkFmXv/YdbblGJYAQpMXQggANt+XfUgpoF8IEzCNBAQHVDJXiWcYudh4CAQeFi4Yi54RLABAtgwEl1E910ViqaLRaBCjtoNksCJzaQ2I3YXGTkAg70LjNLdYhhI1YlR8WwQAcT7ODAJ50gJ8ARPRx4YAIXmNAeXDsQgsQFGeyAQT8RBAIAOw==';

    var playerLeftImage = new Image();
    var playerLeftImageString = 'data:image/gif;base64,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';

    var playerDeadImage = new Image();
    var playerDeadImageString = 'data:image/gif;base64,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';

    var stailasImage = new Image();
    var stailasImageString = 'data:image/jpeg;base64,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';

    var crystalImage = new Image();
    var crystalImageString = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QCARXhpZgAATU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAKgAgAEAAAAAQAAABSgAwAEAAAAAQAAABQAAAAA/9sAQwACAQECAQECAgECAgICAgMFAwMDAwMGBAQDBQcGBwcHBgYGBwgLCQcICggGBgkNCQoLCwwMDAcJDQ4NDA4LDAwL/9sAQwECAgIDAgMFAwMFCwgGCAsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsLCwsL/8AAEQgAFAAUAwEiAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A8Y8K/BbXPFhe6i1vT7PxRaw3Os3mqTwsbCxsra3kuLmJ1RGmazighlkKRhpWZC6I8pVD73+2JrGjatrPxCuPhfDpl9c+AfETaHEpvrVJRZ2+ry+Hf7MmkgiRp5NN+w6NcNJIk10tt4n06K4crDBPc+J/Ar4reHvgL8Hvihc/tK6X4jm8LeENA024njtUWPUr/QpPEuhWV9awz286qs8tpd3Vm22WLfFdYYqsjkZv7JV7rFvc/EfwD+1laeHfFHxK1H4rfFddQ8X2WvtZw3FzBodlJrD2tgGtYZ5G1W38NXdqDBclRFczrb2jWcczeTjsQ6M1UvZR/HZv8Pu6XOrDUfbPl7/0vxOX8M+LpPhmbzw7PqegSRaM8NtC2p6z9jmZfssDEqhjkOwuzkZY4ztHCiiqUeneGPinY2t58StPvtX1SxiFg9/Y2l/NaXvlk7pIXt4gjKXZ+wwQwGVCsSvWOU73Q55rD44ajfQzM4s9AjsjaTIk9ncwXklzHcxTwSApLHLFCInjYFJI2dHVlOKwNV+JN18Qf2h08PaDaaf4SsvB3gyz8KafLpKPNcrpFm0cttYNLevcN5MckzvgYaRhG0hkMUZQor5nN4qWZ5emt5T/AAg2vuaTXZq+57GAk1g8U0+kfxkk/vWj8jf+Fn/JMPDf/YKtf/RKUUUV9MeOf//Z';

    var wallImage = new Image();
    var wallImageString = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QCARXhpZgAATU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAKgAgAEAAAAAQAAAB6gAwAEAAAAAQAAAB4AAAAA/9sAQwABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB/9sAQwEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB/8AAEQgAHgAeAwERAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A/lUuvjl+0LY3M9pefFnxHbXVtK0M8E3hH4VpJFIhwyup+HvBz06gjkEggn+QaPh94aYilTr0ODssq0qsFUp1IZ1xfKM4S1Ti1xLr59no9bn9w1+PfE7DVqlDEccZzSrUpuFSnUyTgqM4TTs4yT4U3v8AJ3urplf/AIX78fP+iv6//wCEp8Kv/ne1r/xDjw5/6IrLv/Dxxh/9Epl/xEPxJ/6LzNv/AAy8E/8A0KB/wv34+f8ARX9f/wDCU+FX/wA72j/iHHhz/wBEVl3/AIeOMP8A6JQ/4iH4k/8AReZt/wCGXgn/AOhQ8q/aI+MvxB8ZfBa28GeMvHWt+JYf+FneHvE0dje+HPhlp9ibjTfC3jXS4b0an4c8AaH4tW4tIdauLeLTn8TP4emS/uru50a41GKxvLD7Twy4L4dyHjXE5rkXDuV5WqvDGNy+riqON4lxePip5plGI+rQjm2f5jl9PC4iVFVcTOhl9LGVauFwcZ4r2NBU5/n/AIucZcR57wJg8qz7ifOM3dLizBY+ng8RguFsJl8pRyjOcP8AWpyyfhzK8yqYvDRrOjhoYjMa2CpUsZjp08Iq2IlVhm6hpp1e7lv9V1jxZqd9Od097qHjbxhe3czZJ3S3Fzrks0hyScu5OST3NbYbErBUYYfB4HJsJh6atToYbIcloUYLtClSy+EIrRaRijbFYCOOrTxGNx+fYzEVP4lfFcS8Q4itP/HVq5nOct38UnuNXw/p8tl/YtlY63feIPEOv+DNE0G/HjHxmLixutW8Z6Bp9zDHbJ4gFlcLqWn3F5pubm0uJYDefaLYx3KQTQuWZYmFf6/XxOBw+W5Zl2e4/McP/YmRuniKODyPMsTSqSqyy36xSeFxNOjiv3VanCoqPs6vNTlUp1M5ZVhJYZYDD0Mzr5nmma8O5dl2K/1i4jVTD1cfxFlWEr01SWa/V6scXhK2Iwt6tGpOk6/taLhVjTqU2XXhC3sbmezvG8R211bSNDPBN4p8VJJHIhIZWU6xwQe/QgggkHNVRzqpiKVOvQWWVaNWCnTqQynKJQnGWqaawWt/wd07Mdfh+hhqtShiJZzSrUpunUpzz3PlOE07NNf2j+OzWqunczL3wV4f1KJYNRi1PUIEkEqw3viLxFdRLKquiyrHPqsiiQJI6hwoYK7rnDMD10M9zLCzdTDTwuGqSi4OdDLcspTcG1JwcqeEi3FyjFuN2m4p7pHFieGsoxtNUsZTx2LpRmqkaeJzjOMRTVRKUVNQq4+UVNRnKKklzJSkr2bu/W9L+F2i6neaYbz4Yaj9lmeNb7SdQ8KalYXKBiFlgu7OWeB1cDOBIxHqQQxjL8Xxbj8JQxao8WYX20FKWHxuFzjC4mlJq7hUo14U6kWm93FJ+t0lmGD4Gy/GV8I8RwTi1Sm4xxOCxOQ4rDVo3dp061CdSm01q1zNrzVm8n/i1vp4C/Pw7/hXb/xl3fiH7sz/AMzi/wCMG/6pP/zDi5+FvYeAPx/4R4/z/wAmlbi3rLiN+n9pr/h/67h/xg3/AFSf/mHON+J2q+Dj4Ht9G8PWPgY3jeKdP1FtR0Sw0BdfS1g0rXIJrN9RsIf7RbSp5ru3mntZJvspu7ezkdGkigMfucKYPO/9YKuPzLEcQewWUYnDLC4/E5k8tlWqYzAVYV44bEz+rLGU4UatOnWjD23sateKkozqc3zXG+N4c/1ao4DKMPwy8S87wuKli8sw+VLNI4eGBzKnUw88VhIfW5YGpVrUalSlOo6Pt6WHk05Rpcvt1fBn6iaVi2q6o2meCLPUZLOw8c+NfhtoGoRlmNu32n4i+FWtp5IxuBa2uooJtwRiRHjaxC45MSsHhFi+IK+FjXxPD+Q8U5lhZWXtV7LhnN1Vpxk7aVaM6kLXSvK91rfeEsZi1g+H6OKnQwvEPEfB+XYqN26b9rxbkkqVVx196lVhTnezbUbNPSzta0qbRNW1DSZ5I5ptPuZLZ5Yt3lyFDw671VgGBBII4ORk4yTAYyGYYLDY2nGcIYmlGrGE7c8VJbS5W02nfVPXfTY1zHBVMux2KwNWcKk8LWlSlOF+WTi/iXMk1dNOzWjurvd5h9O4Jz/n866lrr0aRxn/2Q==';

    var wallImage2 = new Image();
    var wallImage2String = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QCARXhpZgAATU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAKgAgAEAAAAAQAAAB6gAwAEAAAAAQAAAB4AAAAA/9sAQwABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB/9sAQwEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB/8AAEQgAHgAeAwERAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A/ix/4av/AOra/wBk3/wzn/4R1+N/8Qd/6un4yf8Aicf/AIMP27/iNn/VpPBH/wAQL/8ACwf8NX/9W1/sm/8AhnP/AMI6P+IO/wDV0/GT/wATj/8ABgf8Rs/6tJ4I/wDiBf8A4WD/AIav/wCra/2Tf/DOf/hHR/xB3/q6fjJ/4nH/AODA/wCI2f8AVpPBH/xAv/wscf8AEj4/RfEfwUng3/hR37PvgOdPFOm+Jv8AhM/hv8P7zwv42eLTdJ1zSv8AhGH1T/hI77T28Lag+uf2rqdh/ZH2y61bSNDuP7RjgsDbTfQcK+Hn+q2cVs3fHPiJxJ7XLamWxyvirib+1sooe2xWGxU8fRwUcFhn/aX+y08PTxVWrV9hhZ4mlh6dL63iZVfnOLvEn/W3JqGTLgHw14Y9jmlPM55rwjwt/Y+dYj2OFxOFp5fXx0sfi/8AhM/2upiauEo0qP1jFww1bE1K31PCxo/Ptfoh+aBQAUAFABQAUAFABQAUAFABQAUAf//Z';

    var wallImage3 = new Image();
    var wallImage3String = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QCARXhpZgAATU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAKgAgAEAAAAAQAAAB6gAwAEAAAAAQAAAB4AAAAA/9sAQwABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB/9sAQwEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB/8AAEQgAHgAeAwERAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A/iu/aptNHs4v2aYtI8N+FvDvmfso/Ca71STwz4b0fw7L4j1i+vPFd5e+JfE76PZ2f/CQ+Kb7z47W/wDEmqi51m/s7DToL28uPscTD8i8JMZmGM/4id9fzPMsyWF8XeNMHgI5lja+O/s7L6P9muhlmAliJ1KmGy3D1J1qmFwUZuhhPb1KWGhSw6pUaf7N4yYLLcF/xCp5dlWWZXLGeDPA2OzGWWYGhgP7TzKv/air5rmEMNCnTxOaYmnTo08XjpQWIxnsKdbFTrYqVavV+UK/XT8ZCgAoA+sv2r/+ba/+zTfg5/7sdfjfg7/zdP8A7PJxx/7zD9u8bP8Am0n/AGZHgL/3rHybX7IfiIUAFAH1l+1f/wA21/8AZpvwc/8Adjr8b8Hf+bp/9nk44/8AeYft3jZ/zaT/ALMjwF/71j5Nr9kPxEKACgD6y/av/wCba/8As034Of8Aux1+N+Dv/N0/+zyccf8AvMP27xs/5tJ/2ZHgL/3rHybX7IfiIUAFAH//2Q==';

    var wallImage4 = new Image();
    var wallImage4String = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QCARXhpZgAATU0AKgAAAAgABQESAAMAAAABAAEAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAIAAIdpAAQAAAABAAAAWgAAAAAAAABIAAAAAQAAAEgAAAABAAKgAgAEAAAAAQAAAB6gAwAEAAAAAQAAAB4AAAAA/9sAQwABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB/9sAQwEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEB/8AAEQgAHgAeAwERAAIRAQMRAf/EAB8AAAEFAQEBAQEBAAAAAAAAAAABAgMEBQYHCAkKC//EALUQAAIBAwMCBAMFBQQEAAABfQECAwAEEQUSITFBBhNRYQcicRQygZGhCCNCscEVUtHwJDNicoIJChYXGBkaJSYnKCkqNDU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6g4SFhoeIiYqSk5SVlpeYmZqio6Slpqeoqaqys7S1tre4ubrCw8TFxsfIycrS09TV1tfY2drh4uPk5ebn6Onq8fLz9PX29/j5+v/EAB8BAAMBAQEBAQEBAQEAAAAAAAABAgMEBQYHCAkKC//EALURAAIBAgQEAwQHBQQEAAECdwABAgMRBAUhMQYSQVEHYXETIjKBCBRCkaGxwQkjM1LwFWJy0QoWJDThJfEXGBkaJicoKSo1Njc4OTpDREVGR0hJSlNUVVZXWFlaY2RlZmdoaWpzdHV2d3h5eoKDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uLj5OXm5+jp6vLz9PX29/j5+v/aAAwDAQACEQMRAD8A/wA/+gAoAKAPq9LTR1/YbuL7/hG/Cza/P+1faWn/AAmD+G9HbxtDo9p8Ib2b/hG4PF/2P/hII/C1ze3v9qXfhv8AtA6PNq1pZan9jW9g85vyL65mH/EevqCzPMllT8Ivrksm+u13lEswXGXsYZn/AGdKbw0MyhhnUwv12lCnXq4Wp7DETrU6OGVD9m+pZb/xL1/aTyrLHnC8ZvqUc7+o0FnUctfBHt6mVf2lGCxVTLKmKVPF/Ua1SrQo4un9Yw0KFSvipYj5Qr9dPxkKACgD6y/5sX/7uy/94/X43/zkH/3hv/39j9u/5xv/AO83f++IfJtfsh+IhQAUAfWX/Ni//d2X/vH6/G/+cg/+8N/+/sft3/ON/wD3m7/3xD5Nr9kPxEKACgD6y/5sX/7uy/8AeP1+N/8AOQf/AHhv/wB/Y/bv+cb/APvN3/viH//Z';

    var wallImage5 = new Image();
    var wallImage5String = 'data:image/gif;base64,R0lGODdhHgAeAMIAAAAAAKZDAOtfAKhCAPKQSQAAAAAAAAAAACwAAAAAHgAeAAADSAi63P4qyEmrvQLczeUQBCSODUieTZChrMS2wYu6MknX4o0/+p7GPh4w+CM6ekYkURlk+pw7KE5ao8qsLyzMWOQutLOhF0xKAAA7';

    var wallImage6 = new Image();
    var wallImage6String = 'data:image/gif;base64,R0lGODdhHgAeAKEAAAAAAKZDAOtfAPKQSSwAAAAAHgAeAAACRoSPqWvhD6OcAsyLnxis+w8yW0haVQk6aBqsn+p2cLzMdGLfR65bbY/g6YQ3Is0YQ7qUKybKWYKSpCEqCxj8YX3bhharKgAAOw==';

    var wallImage7 = new Image();
    var wallImage7String = 'data:image/gif;base64,R0lGODdhHgAeAMIAAAAAAKZDAOtfAKhCAPKQSQAAAAAAAAAAACwAAAAAHgAeAAADUwi63P4qyEmrvQLczeUQBCSODUiegKll6BiwUusGES1DsWbfTp7zDd8OuBASg7bfUVdbFpPDo9HJrDqnVyi1qpRqqdhl2NsEf7NltFV8Zqfda3ICADs=';

    var wallImage8 = new Image();
    var wallImage8String = 'data:image/gif;base64,R0lGODdhHgAeAKEAAAAAAOtfAPKQSaZDACwAAAAAHgAeAAACS4SPqXshDJczI8R7Kh0YDw583SWG4MiUJbqoJ5u4cAuuc1a/t7ntiOzr8YJD2w4YRPqUxxyxqLsxpU7idHaFZVlbVHf07YQ91SSnAAA7';

    var stairsImage = new Image();
    var stairsImageString = 'data:image/jpeg;base64,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';

    var weaponImage = new Image();
    var weaponImageString = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAADAFBMVEUAAABJCh2WRgCfUDkgJnZwKQb/o7MKAAB2j7l/AACgAADAAADgAABsJiaZRlD/cHD/jIz/qKgAQAAAYAAAoAAA4AAANqZGMAb/vyCZEADcJgCsfCNVFhrLnHBajP8AY5kAvP9Q4P957/+2///S////OP/PdkDfn1/vr2//zI9jQCaPVx+fbz+PbFO/n3/SqXbv598pfMw/n/9/v/+/3/8AQIAfV4/GlmlsUDbChmPZvJwzICbfrInyvI+f/z9DRnM9fMlTs0ZgwklzzElmNiCJTTm/eUb/vHD/2KVNmVxGIAA9MCZzYzZcSTfGuYaTjFlGLQBtPwBwLAD/JgC2UBD/nEAQEBAgICAwMDBNTU1WVlNgYGBwcHB/f3+QkJCgoKCwsLDAwMDQ0NDg4ODw8PA9PT36AAD5AAD/+/AAAAD///+JUz02HRC2fFYmHTBNIBN2OQ2jUyAtAADGbBBgMxaAfGZ2cGBpZlmMg2z/zGkpfP////+JUDNcLSbWplA9EAZAGhA5ExAwDQD/AAC/cFPPj1ZsUFP//8L/rz0go2AgRoITIFkmc0kgAAAWAAAGVh2WQAD/4gCmAABZMBYA0gD1AAD///9TU4DcXACfvwBgpi0xY1n/cEBQAEb/n8nCM4ODAFP/iXn/yWN52QDc/7x2ozMdcABDrAC84kajAP/mkyn//7aASQq5dAD/1jD///8AAADGMwD/qQBwAAA5AAAwIx1ZQzD//6PJWSmsk7YAiXBmSSM9IAAAAAAAAAAAAAAKAAAWKSMWVjAdQyZgv2Ypdj3/AAC/AAD/HQD/ViafAABZJhBzc3NZNjZAHRMwIyAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/wCFJunrAAABAHRSTlP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8AU/cHJQAAAG5JREFUeNpVT8sVwDAIgoPdru7adDwPqRj782CEB0Q5oTrVdjUmMUBYzjHhIgaxsAWmcw6aQDkjiQMbnkoJD9oXIwnYX4G/pEMXsuhfol2BCsUbEjcRz2K5qRaXKASgjDop3WVy1jtWhPe1zXhNF3yoN9+c30/nAAAAAElFTkSuQmCC';

    var slimeImage = new Image();
    var slimeImageString = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAD8GlDQ1BJQ0MgUHJvZmlsZQAAKJGNVd1v21QUP4lvXKQWP6Cxjg4Vi69VU1u5GxqtxgZJk6XpQhq5zdgqpMl1bhpT1za2021Vn/YCbwz4A4CyBx6QeEIaDMT2su0BtElTQRXVJKQ9dNpAaJP2gqpwrq9Tu13GuJGvfznndz7v0TVAx1ea45hJGWDe8l01n5GPn5iWO1YhCc9BJ/RAp6Z7TrpcLgIuxoVH1sNfIcHeNwfa6/9zdVappwMknkJsVz19HvFpgJSpO64PIN5G+fAp30Hc8TziHS4miFhheJbjLMMzHB8POFPqKGKWi6TXtSriJcT9MzH5bAzzHIK1I08t6hq6zHpRdu2aYdJYuk9Q/881bzZa8Xrx6fLmJo/iu4/VXnfH1BB/rmu5ScQvI77m+BkmfxXxvcZcJY14L0DymZp7pML5yTcW61PvIN6JuGr4halQvmjNlCa4bXJ5zj6qhpxrujeKPYMXEd+q00KR5yNAlWZzrF+Ie+uNsdC/MO4tTOZafhbroyXuR3Df08bLiHsQf+ja6gTPWVimZl7l/oUrjl8OcxDWLbNU5D6JRL2gxkDu16fGuC054OMhclsyXTOOFEL+kmMGs4i5kfNuQ62EnBuam8tzP+Q+tSqhz9SuqpZlvR1EfBiOJTSgYMMM7jpYsAEyqJCHDL4dcFFTAwNMlFDUUpQYiadhDmXteeWAw3HEmA2s15k1RmnP4RHuhBybdBOF7MfnICmSQ2SYjIBM3iRvkcMki9IRcnDTthyLz2Ld2fTzPjTQK+Mdg8y5nkZfFO+se9LQr3/09xZr+5GcaSufeAfAww60mAPx+q8u/bAr8rFCLrx7s+vqEkw8qb+p26n11Aruq6m1iJH6PbWGv1VIY25mkNE8PkaQhxfLIF7DZXx80HD/A3l2jLclYs061xNpWCfoB6WHJTjbH0mV35Q/lRXlC+W8cndbl9t2SfhU+Fb4UfhO+F74GWThknBZ+Em4InwjXIyd1ePnY/Psg3pb1TJNu15TMKWMtFt6ScpKL0ivSMXIn9QtDUlj0h7U7N48t3i8eC0GnMC91dX2sTivgloDTgUVeEGHLTizbf5Da9JLhkhh29QOs1luMcScmBXTIIt7xRFxSBxnuJWfuAd1I7jntkyd/pgKaIwVr3MgmDo2q8x6IdB5QH162mcX7ajtnHGN2bov71OU1+U0fqqoXLD0wX5ZM005UHmySz3qLtDqILDvIL+iH6jB9y2x83ok898GOPQX3lk3Itl0A+BrD6D7tUjWh3fis58BXDigN9yF8M5PJH4B8Gr79/F/XRm8m241mw/wvur4BGDj42bzn+Vmc+NL9L8GcMn8F1kAcXjEKMJAAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA3klEQVQ4jaWTIRKDMBBF/3aQ5QJUpA7VEyAqsdW9CFcoN+ACVRgssgJfiwNRLkAVZiuYZJIQMjBdudn/9mdnl5gZ/0TgShKRk8rM5AVI4f0d4xafVb5qO/T1qN51EMkvEBEneQSRhnheHgCAcipQtZ3Rsa9HNNmgIIEt1jvrIgAQaQiRhgAiEBEzMzlnUE6Fsm6DZoA2A737msgNmV0EvuItcditWAPs6a7XLob4eX294tP1aDpgZmqyYZNYr5G7YMzApm9xYGwiACR55AVIt3ITyb7GtUOSYR/UArA3fqIHcmSJdi/IAAAAAElFTkSuQmCC';

    var weaponEnemyImage = new Image();
    var weaponEnemyImageString = 'data:image/png;base64,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rf4eMz9js2ip0cqDDfujQvWhfWKPZhkPwNrRpXpwNB0cWrXkyOMeJNlpYSnl85vN5m+cnZ395hsZ1HzD46s3b97cf/KTn/zcdrv9SCnlF5unPOw4gD59RmipVlO/TvEOc01HtI9bPalL80D3+r2YZ3At5vZJNtvv95/Z7/c//KlPferX3ghQ4M2N4B7W+fn5DQB/ZrFY/JSIPI1Hg9TdY1Ojl8ftw1eUetrrYUSwbdpxlaE7IxxtqJdSvnRxcfHJ3W73y48//vjpm3rwrm5v9nj22WfDgwcP3rPdbv++u596G283s8P4ezu0DZh4G5U/Hpe3R+PyteqjkXlrsxjm7tqOb242m799//79/7dj88er2fKTMcYfGobho0T0NI5qt81bO83xgb7dPbrNH3tbzPZczezObrf797XWz7744ovPfTf/EPFW/asLbt++nZ566qnHcs7fz8x/arVa/UAI4QnMVUbBo57LwYHR0fhDOyqAUmv9Ws75N6Zp+lyM8X+s1+v7eGXb5DtabxnYoyV37twJ169fX56fnz81juP3pZTel1J6BsAzAN5FRKGldcXd75rZF0spX8g5356m6fZqtbp7enq6u3XrVsVb+E9M/weTmEYzoKJ8sAAAAABJRU5ErkJggg==';

    wallImage.src = wallImageString;
    floorImage.src = floorImageString;

    playerBackImage.src = playerBackImageString;
    playerFrontImage.src = playerFrontImageString;
    playerRightImage.src = playerRightImageString;
    playerLeftImage.src = playerLeftImageString;

    crystalImage.src = crystalImageString;
    wallImage.src = wallImageString;
    wallImage2.src = wallImage2String;
    wallImage3.src = wallImage3String;
    wallImage4.src = wallImage4String;
    wallImage5.src = wallImage5String;
    wallImage6.src = wallImage6String;
    wallImage7.src = wallImage7String;
    wallImage8.src = wallImage8String;
    stairsImage.src = stairsImageString;
    weaponImage.src = weaponImageString;

    playerDeadImage.src = playerDeadImageString;
    slimeImage.src = slimeImageString;

    weaponEnemyImage.src = weaponEnemyImageString;
    var roundedRectangle = function(param) {
        var x = param.x;
        var y = param.y;
        var width = param.width;
        var height = param.height;
        var radius = param.radius;
        var ctx = param.ctx;

        ctx.save();
        ctx.lineWidth = param.lineWidth || 1;
        ctx.strokeStyle = param.strokeColor || "black";
        ctx.fillStyle = param.fillColor || "black";
        ctx.beginPath();
        ctx.moveTo(x + radius, y);
        ctx.lineTo(x + width - radius, y);
        ctx.arc(x + width - radius, y + radius, radius, Math.PI * 1.5, 0, false);
        ctx.lineTo(x + width, y + height - radius);
        ctx.arc(x + width - radius, y + height - radius, radius, 0, Math.PI * 0.5, false);
        ctx.lineTo(x + radius, y + height);
        ctx.arc(x + radius, y + height - radius, radius, Math.PI * 0.5, Math.PI, false);
        ctx.lineTo(x, y + radius);
        ctx.arc(x + radius, y + radius, radius, Math.PI, Math.PI * 1.5, false);
        ctx.closePath();
        if (param.fill) {
            ctx.fill();
        }
        if (param.stroke) {
            ctx.stroke();
        }
        ctx.restore();
    };
    /**
     * 画面への描画を行う基底クラス
     */
    var Shader = function(spec) {
        spec = spec || {};
        var that = {};
        var my = {};
        my.counte = 0;
        my.maxCount = spec.maxCount || 1;

        that.draw = function(ctx, offset, scale) {
        };
        return that;
    };

    /**
     * マップの描写を行うクラス
     * @param {Object} spec
     */
    var MapShader = function(spec) {
        spec = spec || {};

        var that = Shader(spec);
        var my = {};

        /**
         * マップを描写する
         * @param {2DContext} ctx Canvasのcontext
         * @param {Object} offset Canvas座標中での中心をずらした際のオフセット
         * @param {Object} scale Canvasに表示する際の拡大率
         * @param {Map} mapObj 表示するMapクラスのインスタンス
         */
        that.draw = function(ctx, offset, scale, mapObj) {
            ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);
            var mapData = mapObj.getMapData();
            ctx.save();
            var canvasWidth = ctx.canvas.width;
            var canvasHeight = ctx.canvas.height;
            var mapWidth = mapObj.getWidth();
            var mapHeight = mapObj.getHeight();
            var maxi = parseInt((offset.x + canvasWidth) / scale, 10);
            var maxj = parseInt((offset.y + canvasHeight) / scale, 10);

            for (var i = 0; i < maxi; i++) {
                for (var j = 0; j < maxj; j++) {
                    var drawX = i * scale - offset.x;
                    var drawY = j * scale - offset.y;
                    if (drawX >= 0 && drawX <= canvasWidth && drawY >= 0 && drawY <= canvasHeight) {
                        if ( typeof mapData[i] === 'undefined') {
                            continue;
                        }
                        if (mapData[i][j] == mapObj.objectTypeID.wall) {
                            //下が道のとき:1
                            if ( typeof mapData[i][j + 1] !== 'undefined' && mapData[i][j + 1] != mapObj.objectTypeID.wall) {
                                ctx.drawImage(wallImage, drawX, drawY, scale, scale);
                            }
                            //上が道の時
                            else if ( typeof mapData[i][j - 1] !== 'undefined' && mapData[i][j - 1] != mapObj.objectTypeID.wall) {
                                if (( typeof mapData[i - 1] !== 'undefined' && typeof mapData[i-1][j] !== 'undefined' && mapData[i-1][j] != mapObj.objectTypeID.wall ) && ( typeof mapData[i + 1] !== 'undefined' && typeof mapData[i + 1][j] !== 'undefined' && mapData[i+1][j] != mapObj.objectTypeID.wall )) {
                                    ctx.drawImage(wallImage7, drawX, drawY, scale, scale);
                                }
                                else if ( typeof mapData[i - 1] !== 'undefined' && typeof mapData[i-1][j] !== 'undefined' && mapData[i-1][j] != mapObj.objectTypeID.wall) {
                                    ctx.drawImage(wallImage5, drawX, drawY, scale, scale);
                                }
                                else if ( typeof mapData[i + 1] !== 'undefined' && typeof mapData[i + 1][j] !== 'undefined' && mapData[i+1][j] != mapObj.objectTypeID.wall) {
                                    ctx.drawImage(wallImage6, drawX, drawY, scale, scale);
                                }
                                else if ((mapData[i+1][j] == mapObj.objectTypeID.wall ) && ( typeof mapData[i+1][j + 1] !== 'undefined' && mapData[i+1][j + 1] != mapObj.objectTypeID.wall)) {
                                    ctx.drawImage(wallImage6, drawX, drawY, scale, scale);
                                }
                                else if ((mapData[i-1][j] == mapObj.objectTypeID.wall ) && ( typeof mapData[i-1][j + 1] !== 'undefined' && mapData[i-1][j + 1] != mapObj.objectTypeID.wall)) {
                                    ctx.drawImage(wallImage5, drawX, drawY, scale, scale);
                                }
                                else {
                                    ctx.drawImage(wallImage2, drawX, drawY, scale, scale);
                                }
                            }
                            //左が道の時
                            else if ( typeof mapData[i - 1] !== 'undefined' && typeof mapData[i-1][j] !== 'undefined' && mapData[i-1][j] != mapObj.objectTypeID.wall) {
                                if ( typeof mapData[i + 1] !== 'undefined' && typeof mapData[i + 1][j] !== 'undefined' && mapData[i+1][j] != mapObj.objectTypeID.wall) {
                                    ctx.drawImage(wallImage8, drawX, drawY, scale, scale);
                                }
                                else {
                                    ctx.drawImage(wallImage3, drawX, drawY, scale, scale);
                                }
                            }
                            //右が道の時
                            else if ( typeof mapData[i + 1] !== 'undefined' && typeof mapData[i + 1][j] !== 'undefined' && mapData[i+1][j] != mapObj.objectTypeID.wall) {
                                ctx.drawImage(wallImage4, drawX, drawY, scale, scale);
                            }
                            else if ( typeof mapData[i - 1] !== 'undefined' && (mapData[i-1][j] == mapObj.objectTypeID.wall ) && ( typeof mapData[i-1][j + 1] !== 'undefined' && mapData[i-1][j + 1] != mapObj.objectTypeID.wall)) {
                                if ( typeof mapData[i + 1] !== 'undefined' && (mapData[i+1][j] == mapObj.objectTypeID.wall ) && ( typeof mapData[i+1][j + 1] !== 'undefined' && mapData[i+1][j + 1] != mapObj.objectTypeID.wall)) {
                                    ctx.drawImage(wallImage8, drawX, drawY, scale, scale);
                                }
                                else {
                                    ctx.drawImage(wallImage3, drawX, drawY, scale, scale);
                                }
                            }
                            else if ( typeof mapData[i + 1] !== 'undefined' && (mapData[i+1][j] == mapObj.objectTypeID.wall ) && ( typeof mapData[i+1][j + 1] !== 'undefined' && mapData[i+1][j + 1] != mapObj.objectTypeID.wall)) {
                                ctx.drawImage(wallImage4, drawX, drawY, scale, scale);
                            }
                        }
                        else if (mapData[i][j] === mapObj.objectTypeID.trap) {
                            ctx.fillStyle = "rgb(92,40,51)";
                            ctx.fillRect(drawX, drawY, scale, scale);
                        }
                        else if (mapData[i][j] === mapObj.objectTypeID.player) {
                            ctx.fillStyle = "rgb(255,0,0)";
                            ctx.fillRect(drawX, drawY, scale, scale);
                        }
                        else if (mapData[i][j] === mapObj.objectTypeID.crystal) {
                            ctx.drawImage(crystalImage, drawX, drawY, scale, scale);
                        }
                        else if (mapData[i][j] === mapObj.objectTypeID.stairs) {
                            ctx.drawImage(stairsImage, drawX, drawY, scale, scale);
                        }
                        else {
                            ctx.drawImage(floorImage, drawX, drawY, scale, scale);
                        }
                    }
                }
            }
            ctx.restore();
        };
        return that;
    };
    /**
     * クライアント側でのMapの操作を行うクラス
     * @param {Object} spec
     */
    var CliantMap = function(spec) {
        //Map継承
        var that = Map(spec);
        var my = {};

        //シェーダーを継承したマップシェーダークラスのインスタンスを持つ
        my.mapShader = MapShader(spec);

        //マップシェーダークラスのdrawを呼び出す
        that.draw = function(ctx, offset, scale, mapData) {
            mapData = mapData || that;
            my.mapShader.draw(ctx, offset, scale, mapData);
        };
        return that;
    };

    /**
     * プレイヤーの描写を行うクラス
     * @param {Object} spec
     */
    var PlayerShader = function(spec) {
        spec = spec || {};

        var that = Shader(spec);
        var my = {};

        that.draw = function(ctx, offset, scale, playerData) {
            var position = playerData.position;
            ctx.save();
            var currentFront = playerData.getFront();

            ctx.fillStyle = "rgb(255,255,255)";
            ctx.strokeStyle = "rgb(0,0,0)";
            ctx.fillText(playerData.getUserID(), position.x * scale - offset.x + 10, position.y * scale - offset.y - 15);
            //ctx.strokeText(playerData.getUserID(), position.x * scale - offset.x + 10, position.y * scale - offset.y - 15);
            //ctx.fillText("Crystal:" + playerData.getCrystalCount(), position.x * scale - offset.x + 10, position.y * scale - offset.y - 5);
            //ctx.strokeText("Crystal:" + playerData.getCrystalCount(), position.x * scale - offset.x + 10, position.y * scale - offset.y - 5);

            //SOS中のとき
            if (playerData.getState() === 2) {
                ctx.fillStyle = "rgb(255,50,50)";
                ctx.font = "bold 22px 'ＭＳＰゴシック'";
                ctx.fillText("SOS!!", position.x * scale - offset.x + 10, position.y * scale - offset.y - 30);
            }

            if (playerData.getIsMatchless()) {
                ctx.globalAlpha = 0.7;
            }

            //HPが0以下の時は画像を回転
            if (playerData.getHP() <= 0) {
                ctx.drawImage(playerDeadImage, position.x * scale - offset.x, position.y * scale - offset.y, scale, scale);
            }
            //左向き
            else if (Math.abs(currentFront.x) >= Math.abs(currentFront.y) && currentFront.x < 0) {
                ctx.drawImage(playerLeftImage, position.x * scale - offset.x, position.y * scale - offset.y, scale, scale);
            }
            //右向き
            else if (Math.abs(currentFront.x) >= Math.abs(currentFront.y) && currentFront.x > 0) {
                ctx.drawImage(playerRightImage, position.x * scale - offset.x, position.y * scale - offset.y, scale, scale);
            }
            //上向き(背中)
            else if (Math.abs(currentFront.x) <= Math.abs(currentFront.y) && currentFront.y < 0) {
                ctx.drawImage(playerBackImage, position.x * scale - offset.x, position.y * scale - offset.y, scale, scale);
            }
            //下向き(手前)
            else if (Math.abs(currentFront.x) <= Math.abs(currentFront.y) && currentFront.y > 0) {
                ctx.drawImage(playerFrontImage, position.x * scale - offset.x, position.y * scale - offset.y, scale, scale);
            }
            ctx.restore();
        };
        return that;
    };

    /**
     * 敵の描写を行うクラス
     * @param {Object} spec
     */
    var EnemyShader = function(spec) {
        spec = spec || {};

        var that = Shader(spec);
        var my = {};

        that.draw = function(ctx, offset, scale, enemyData) {
            var position = enemyData.position;
            var size = enemyData.getSize();
            ctx.save();
            ctx.fillStyle = "rgb(255,127,0)";
            ctx.drawImage(slimeImage, position.x * scale - offset.x, position.y * scale - offset.y, scale * size, scale * size);

            //HPバー表示
            ctx.lineWidth = 2;
            ctx.strokeStyle = "#FFFFFF";
            ctx.strokeRect(position.x * scale - offset.x, position.y * scale - offset.y - 10, scale * size, 4);
            ctx.fillStyle = "#FF2222";
            ctx.fillRect(position.x * scale - offset.x, position.y * scale - offset.y - 10, (scale * size * enemyData.getHP() / enemyData.getMaxHP()).toFixed(), 4);

            ctx.restore();
        };
        return that;
    };

    /**
     * 攻撃の描写を行うクラス
     * @param {Object} spec
     */
    var WeaponShader = function(spec) {
        spec = spec || {};

        var that = Shader(spec);
        var my = {};
        that.draw = function(ctx, offset, scale, weaponData) {
            var position = weaponData.position;
            if (weaponData.getParentID() < 0) {
                ctx.drawImage(weaponEnemyImage, position.x * scale - offset.x, position.y * scale - offset.y, scale, scale);
            }
            else {
                ctx.drawImage(weaponImage, position.x * scale - offset.x, position.y * scale - offset.y, scale, scale);
            }
        };
        return that;
    };

    var WindowShader = function(spec) {
        spec = spec || {};

        var that = Shader(spec);
        var my = {};

        /**
         *
         * @param {Object} ctx
         * @param {Object} offset
         * @param {Object} scale
         * @param {Object} data
         * @param {Object} data.playerData
         */
        that.draw = function(ctx, scale, data) {
            var playerData = data.playerData;
            var canvasWidth = ctx.canvas.width;
            var canvasHeight = ctx.canvas.height;
            var fontSize = canvasWidth*0.02;

            ctx.save();
            //枠線
            ctx.fillStyle = "rgba(200,200,200,0.3)";
            ctx.fillRect((canvasWidth * 0.01).toFixed(), (canvasHeight * 0.005).toFixed(), (canvasWidth * 0.98).toFixed(), (canvasHeight * 0.04).toFixed());

            //プレイヤー名
            ctx.fillStyle = "rgb(255,255,255)";
            ctx.font = String.prototype.Format("bold {0}px 'ＭＳＰゴシック'",fontSize);
            ctx.strokeStyle = "rgb(0,0,0)";
            ctx.fillText(playerData.getUserID(), (canvasWidth * 0.02).toFixed(), (canvasHeight * 0.04).toFixed(), (canvasWidth * 0.15).toFixed());
            ctx.strokeText(playerData.getUserID(), (canvasWidth * 0.02).toFixed(), (canvasHeight * 0.04).toFixed(), (canvasWidth * 0.15).toFixed());

            //階層表示
            ctx.fillStyle = "rgb(255,255,255)";
            ctx.strokeStyle = "rgb(0,0,0)";
            ctx.fillText("地下" + playerData.getLayer() + "階", (canvasWidth * 0.2).toFixed(), (canvasHeight * 0.04).toFixed(), (canvasWidth * 0.1).toFixed());
            ctx.strokeText("地下" + playerData.getLayer() + "階", (canvasWidth * 0.2).toFixed(), (canvasHeight * 0.04).toFixed(), (canvasWidth * 0.1).toFixed());

            //HPバー表示
            ctx.fillText("HP", (canvasWidth * 0.31).toFixed(), (canvasHeight * 0.04).toFixed(), (canvasWidth * 0.03).toFixed());
            ctx.strokeText("HP", (canvasWidth * 0.31).toFixed(), (canvasHeight * 0.04).toFixed(), (canvasWidth * 0.03).toFixed());

            ctx.lineWidth = 2;
            ctx.strokeStyle = "#FFFFFF";
            ctx.strokeRect((canvasWidth * 0.35).toFixed(), (canvasHeight * 0.014).toFixed(), parseInt((canvasWidth * 0.2)), (canvasHeight * 0.024).toFixed());
            ctx.fillStyle = "#FF2222";
            ctx.fillRect((canvasWidth * 0.35).toFixed(), (canvasHeight * 0.014).toFixed(), parseInt((canvasWidth * 0.2) * playerData.getHP() / 10), (canvasHeight * 0.024).toFixed());

            //死んだ時の説明を表示
            if (playerData.getHP() <= 0 && playerData.getState() !== 0&&playerData.getState() !== 2&&playerData.getState() !== 3) {
                ctx.fillStyle = "rgb(255,255,255)";
                ctx.strokeStyle = "rgb(0,0,0)";
                ctx.fillText("ZキーでSOS・Xキーでリトライ", (canvasWidth /2).toFixed(), (canvasHeight/2).toFixed());
                ctx.strokeText("ZキーでSOS・Xキーでリトライ", (canvasWidth /2).toFixed(), (canvasHeight/2).toFixed());
            }

            ctx.restore();
        };
        return that;
    };

    global["shader"] = {
        playerShader : PlayerShader(),
        weaponShader : WeaponShader(),
        enemyShader : EnemyShader(),
        windowShader : WindowShader()
    };
    global["CliantMap"] = CliantMap;
}(this));
